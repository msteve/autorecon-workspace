# Dashboard Module Architecture

## Component Hierarchy

```
DashboardPage
â”œâ”€â”€ Header Section
â”‚   â”œâ”€â”€ Title & Description
â”‚   â””â”€â”€ Action Buttons
â”‚       â”œâ”€â”€ Refresh Button
â”‚       â””â”€â”€ Upload Data Button
â”‚
â”œâ”€â”€ KPI Cards Section (Grid: 4 columns)
â”‚   â”œâ”€â”€ KPICard (Total Transactions)
â”‚   â”œâ”€â”€ KPICard (Match Rate)
â”‚   â”œâ”€â”€ KPICard (Active Exceptions)
â”‚   â””â”€â”€ KPICard (Pending Settlements)
â”‚
â”œâ”€â”€ Charts Section (Grid: 2 columns)
â”‚   â”œâ”€â”€ DailyVarianceChart
â”‚   â”‚   â””â”€â”€ Recharts LineChart
â”‚   â”‚       â”œâ”€â”€ CartesianGrid
â”‚   â”‚       â”œâ”€â”€ XAxis
â”‚   â”‚       â”œâ”€â”€ YAxis
â”‚   â”‚       â”œâ”€â”€ Tooltip
â”‚   â”‚       â”œâ”€â”€ Legend
â”‚   â”‚       â”œâ”€â”€ Line (Variance)
â”‚   â”‚       â””â”€â”€ Line (Threshold)
â”‚   â”‚
â”‚   â””â”€â”€ PartnerPerformanceChart
â”‚       â””â”€â”€ Recharts BarChart
â”‚           â”œâ”€â”€ CartesianGrid
â”‚           â”œâ”€â”€ XAxis
â”‚           â”œâ”€â”€ YAxis
â”‚           â”œâ”€â”€ Tooltip
â”‚           â”œâ”€â”€ Legend
â”‚           â”œâ”€â”€ Bar (Matched)
â”‚           â”œâ”€â”€ Bar (Unmatched)
â”‚           â””â”€â”€ Bar (Exceptions)
â”‚
â”œâ”€â”€ Widgets Section (Grid: 7 columns, 3:4 ratio)
â”‚   â”œâ”€â”€ AlertsWidget (3 columns)
â”‚   â”‚   â”œâ”€â”€ Alert Item (Error)
â”‚   â”‚   â”œâ”€â”€ Alert Item (Warning)
â”‚   â”‚   â”œâ”€â”€ Alert Item (Info)
â”‚   â”‚   â””â”€â”€ Empty State
â”‚   â”‚
â”‚   â””â”€â”€ RecentBatchesWidget (4 columns)
â”‚       â”œâ”€â”€ Batch Item (Completed)
â”‚       â”œâ”€â”€ Batch Item (Processing)
â”‚       â”œâ”€â”€ Batch Item (Failed)
â”‚       â””â”€â”€ Empty State
â”‚
â””â”€â”€ Quick Actions Section (Grid: 4 columns)
    â”œâ”€â”€ Upload New File Button
    â”œâ”€â”€ Review Exceptions Button
    â”œâ”€â”€ Pending Approvals Button
    â””â”€â”€ Generate Report Button
```

## Data Flow Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DashboardPage                        â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚         React Query (QueryClient)             â”‚    â”‚
â”‚  â”‚                                               â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚    â”‚
â”‚  â”‚  â”‚  Query Keys & Caching               â”‚     â”‚    â”‚
â”‚  â”‚  â”‚                                     â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ dashboard-stats (30s refresh)   â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ dashboard-variance              â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ dashboard-partners              â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ dashboard-alerts (60s refresh)  â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ dashboard-batches               â”‚     â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                         â”‚                              â”‚
â”‚                         â–¼                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚         dashboardService.ts                   â”‚    â”‚
â”‚  â”‚                                               â”‚    â”‚
â”‚  â”‚  Mock Data Generators:                       â”‚    â”‚
â”‚  â”‚  â€¢ generateMockStats()                       â”‚    â”‚
â”‚  â”‚  â€¢ generateMockVarianceData()                â”‚    â”‚
â”‚  â”‚  â€¢ generateMockPartnerData()                 â”‚    â”‚
â”‚  â”‚  â€¢ generateMockAlerts()                      â”‚    â”‚
â”‚  â”‚  â€¢ generateMockRecentBatches()               â”‚    â”‚
â”‚  â”‚                                               â”‚    â”‚
â”‚  â”‚  Service Methods:                            â”‚    â”‚
â”‚  â”‚  â€¢ getStats()                                â”‚    â”‚
â”‚  â”‚  â€¢ getDailyVariance()                        â”‚    â”‚
â”‚  â”‚  â€¢ getPartnerPerformance()                   â”‚    â”‚
â”‚  â”‚  â€¢ getAlerts()                               â”‚    â”‚
â”‚  â”‚  â€¢ getRecentBatches()                        â”‚    â”‚
â”‚  â”‚  â€¢ dismissAlert(id)                          â”‚    â”‚
â”‚  â”‚                                               â”‚    â”‚
â”‚  â”‚  (Simulated delays: 300-800ms)               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                         â”‚                              â”‚
â”‚                         â–¼                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚         Component Props Distribution          â”‚    â”‚
â”‚  â”‚                                               â”‚    â”‚
â”‚  â”‚  KPICard â—„â”€â”€â”€â”€ stats data                    â”‚    â”‚
â”‚  â”‚  DailyVarianceChart â—„â”€â”€â”€â”€ variance data      â”‚    â”‚
â”‚  â”‚  PartnerPerformanceChart â—„â”€â”€â”€â”€ partner data  â”‚    â”‚
â”‚  â”‚  AlertsWidget â—„â”€â”€â”€â”€ alerts data              â”‚    â”‚
â”‚  â”‚  RecentBatchesWidget â—„â”€â”€â”€â”€ batches data      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## State Management Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  User Interactions                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Event Handlers                         â”‚
â”‚                                                          â”‚
â”‚  â€¢ handleRefresh()      â†’ Invalidate all queries        â”‚
â”‚  â€¢ handleAlertAction()  â†’ Trigger alert action          â”‚
â”‚  â€¢ onDismiss()          â†’ Dismiss alert mutation        â”‚
â”‚  â€¢ onViewDetails()      â†’ Navigate to batch details     â”‚
â”‚  â€¢ Quick Actions        â†’ Navigate to modules           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              React Query Mutations                       â”‚
â”‚                                                          â”‚
â”‚  dismissAlertMutation:                                  â”‚
â”‚  â”œâ”€â”€ mutationFn: dashboardService.dismissAlert()       â”‚
â”‚  â”œâ”€â”€ onSuccess: Update cache (remove alert)            â”‚
â”‚  â””â”€â”€ onSuccess: Show toast notification                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Optimistic UI Updates                       â”‚
â”‚                                                          â”‚
â”‚  â€¢ Alert removed from UI immediately                    â”‚
â”‚  â€¢ Loading states shown during refresh                  â”‚
â”‚  â€¢ Toast notifications for user feedback                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Responsive Breakpoints

```
Mobile (< 768px)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Header            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   KPI Card 1        â”‚
â”‚   KPI Card 2        â”‚
â”‚   KPI Card 3        â”‚
â”‚   KPI Card 4        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Variance Chart    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Partner Chart     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Alerts Widget     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Batches Widget    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Quick Action 1    â”‚
â”‚   Quick Action 2    â”‚
â”‚   Quick Action 3    â”‚
â”‚   Quick Action 4    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Tablet (768px - 1024px)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Header                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   KPI Card 1     â”‚   KPI Card 2     â”‚
â”‚   KPI Card 3     â”‚   KPI Card 4     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Variance Chart â”‚   Partner Chart  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Alerts Widget  â”‚  Batches Widget  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Action 1 | Action 2 | Action 3 | 4 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Desktop (> 1024px)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Header                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  KPI 1   â”‚  KPI 2   â”‚  KPI 3   â”‚         KPI 4            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         Variance Chart        â”‚      Partner Chart        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚       Alerts Widget (3 col)   â”‚  Batches Widget (4 col)   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Upload  â”‚  Exceptions  â”‚  Approvals  â”‚  Reports          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Loading States Flow

```
Initial Page Load
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Show Skeleton UI   â”‚
â”‚  for all components â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Parallel Queries   â”‚
â”‚  â”œâ”€â”€ getStats()     â”‚
â”‚  â”œâ”€â”€ getVariance()  â”‚
â”‚  â”œâ”€â”€ getPartners()  â”‚
â”‚  â”œâ”€â”€ getAlerts()    â”‚
â”‚  â””â”€â”€ getBatches()   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  As each query      â”‚
â”‚  completes, replace â”‚
â”‚  skeleton with data â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  All data loaded    â”‚
â”‚  UI fully rendered  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Background refresh â”‚
â”‚  (stats: 30s)       â”‚
â”‚  (alerts: 60s)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Error Handling Flow

```
API Request
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     Success     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Query   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚  Update Cache â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                              â”‚
     â”‚ Error                        â–¼
     â–¼                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚  Render Data  â”‚
â”‚  Error State     â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Keep old data  â”‚
â”‚ â€¢ Show error UI  â”‚
â”‚ â€¢ Enable retry   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ User clicks Retry
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Refetch Query   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## TypeScript Type Flow

```
Service Layer (dashboardService.ts)
â”œâ”€â”€ DashboardStats interface
â”œâ”€â”€ DailyVarianceData interface
â”œâ”€â”€ PartnerPerformanceData interface
â”œâ”€â”€ DashboardAlert interface
â””â”€â”€ RecentBatchData interface
          â”‚
          â–¼
React Query Layer (DashboardPage.tsx)
â”œâ”€â”€ useQuery<DashboardStats>
â”œâ”€â”€ useQuery<DailyVarianceData[]>
â”œâ”€â”€ useQuery<PartnerPerformanceData[]>
â”œâ”€â”€ useQuery<DashboardAlert[]>
â””â”€â”€ useQuery<RecentBatchData[]>
          â”‚
          â–¼
Component Props (Typed Interfaces)
â”œâ”€â”€ KPICardProps
â”œâ”€â”€ DailyVarianceChartProps
â”œâ”€â”€ PartnerPerformanceChartProps
â”œâ”€â”€ AlertsWidgetProps
â””â”€â”€ RecentBatchesWidgetProps
          â”‚
          â–¼
Rendered UI (Type-safe)
```

## Testing Strategy

```
Unit Tests (68 total)
â”‚
â”œâ”€â”€ Component Tests (52 tests)
â”‚   â”œâ”€â”€ KPICard (12 tests)
â”‚   â”‚   â”œâ”€â”€ Rendering
â”‚   â”‚   â”œâ”€â”€ Props handling
â”‚   â”‚   â””â”€â”€ States (loading, error)
â”‚   â”‚
â”‚   â”œâ”€â”€ DailyVarianceChart (7 tests)
â”‚   â”‚   â”œâ”€â”€ Chart rendering
â”‚   â”‚   â”œâ”€â”€ Data visualization
â”‚   â”‚   â””â”€â”€ Empty/loading states
â”‚   â”‚
â”‚   â”œâ”€â”€ PartnerPerformanceChart (8 tests)
â”‚   â”‚   â”œâ”€â”€ Chart rendering
â”‚   â”‚   â”œâ”€â”€ Data visualization
â”‚   â”‚   â””â”€â”€ Empty/loading states
â”‚   â”‚
â”‚   â”œâ”€â”€ AlertsWidget (11 tests)
â”‚   â”‚   â”œâ”€â”€ Alert rendering
â”‚   â”‚   â”œâ”€â”€ Interactions (dismiss, action)
â”‚   â”‚   â””â”€â”€ States
â”‚   â”‚
â”‚   â””â”€â”€ RecentBatchesWidget (14 tests)
â”‚       â”œâ”€â”€ Batch rendering
â”‚       â”œâ”€â”€ Status display
â”‚       â””â”€â”€ Interactions
â”‚
â””â”€â”€ Integration Tests (16 tests)
    â””â”€â”€ DashboardPage
        â”œâ”€â”€ Data fetching
        â”œâ”€â”€ Component integration
        â”œâ”€â”€ User interactions
        â””â”€â”€ Error handling
```

## Performance Optimization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     React Query Caching             â”‚
â”‚  â€¢ Stats cached for 30s             â”‚
â”‚  â€¢ Alerts cached for 60s            â”‚
â”‚  â€¢ Other data cached indefinitely   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Component Memoization           â”‚
â”‚  â€¢ Charts use React.memo            â”‚
â”‚  â€¢ Prevent unnecessary re-renders   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Code Splitting                  â”‚
â”‚  â€¢ Dashboard loaded on-demand       â”‚
â”‚  â€¢ Recharts lazy loaded             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Optimistic Updates              â”‚
â”‚  â€¢ Alert dismissal updates UI first â”‚
â”‚  â€¢ Background API call              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

This architecture provides a scalable, maintainable, and performant Dashboard module! ğŸš€
